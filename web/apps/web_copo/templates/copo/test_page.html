{% extends 'copo/base_1col.html' %}

{% load staticfiles %}
{% load web_tags %}

{% block stylesheet_block %}
    <link rel="stylesheet" href="{% static 'copo/css/copo/browse_style.css' %}" xmlns="http://www.w3.org/1999/html">

    <link rel="stylesheet" type="text/css" href="{% static "copo/annotator.min.css" %} "/>
    <link rel="stylesheet" href="{% static 'copo/css/copo/copo_ontology_styles.css' %}"
          xmlns="http://www.w3.org/1999/html">
    <style>
        body {
            background-color: #f4f4f4;
        }

        #text-area {
            max-height: 250px;
            border: 1px solid #dcdcdc;
            overflow-y: scroll;
            background-color: white;
            padding: 20px
        }

        .annotator-listing {
            height: 300px;
            overflow-y: scroll
        }

        .list_el {
            padding: 10px
        }

        #search_results {

            background-color: white;
            border: 1px solid #dcdcdc;
        }

        .annotator-filter {
            margin-top: 50px
        }
    </style>

{% endblock %}






{% block title_block %} Index {% endblock %}

{% block tagline_block %}



{% endblock %}

{% block page_banner %}



{% endblock %}


{% block breadcrumb_block %}
    <ol class="breadcrumb">
        <li class="active"><a href="{% url 'copo:index' %}">Home</a></li>

    </ol>
{% endblock %}

{% block browse_header_block %}


{% endblock %}

{% block content %}
    {% csrf_token %}

    <input type="hidden" id="file_id" value="{{ file_id }}"/>
    <input type="hidden" id="file_name" value="{{ file_name }}"/>
    <input type="hidden" id="annotation_type" value="text"/>

    <div id="text-area">
        {{ html | safe }}
        {% lorem 4 p random %}
    </div>


    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6">
            <h4 class="h4" style="margin-top:1em">Search results</h4>
            {#            <div id="search_results">#}
            {##}
            {#            </div>#}
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">

        </div>
    </div>


{% endblock %}


{% block js_block %}

    <script type="text/javascript" src="{% static "copo/annotator-2.0.0-alpha.3/pkg/annotator.min.js" %}"></script>
    <script type="text/javascript" src="{% static "copo/annotator-2.0.0-alpha.3/pkg/annotator.document.js" %}"></script>
    <script type="text/javascript"
            src="{% static "copo/annotator-2.0.0-alpha.3/pkg/annotator.unsupported.js" %}"></script>
    <script type="text/javascript" src="{% static "copo/annotator-full.min.js" %}"></script>
    <script type="text/javascript" src="{% static "copo/js/annotator_ols.js" %}"></script>
    <script type="text/javascript" src="{% static "copo/js/copo_annotate_spreadsheet.js" %}"></script>


    <script>

        $(document).ready(function () {
            var app = new annotator.App();
            app.include(annotator.ui.main, {
                element: document.getElementById("text-area"),
                editorExtensions: [ols_annotator.getEditorExtension({defaultFields: false})],
                viewerExtensions: [
                    annotator.ui.tags.viewerExtension,

                ]
            });


            app.include(annotator.storage.http, {
                headers: {'X-CSRFToken': $.cookie('csrftoken')},
                prefix: '/copo'
            });

            var additional = function () {
                return {
                    beforeAnnotationCreated: function (ann) {
                    },
                    start: function (ann) {
                    }
                };
            };
            app.include(additional)
            app.start().then(function () {
                var file_id = $("#file_id").val()
                app.annotations.load({"file_id": file_id});
                app.modules
            });


        })


    </script>


{% endblock %}