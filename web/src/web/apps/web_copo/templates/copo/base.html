<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en">
{% load compress %}
{% load staticfiles %}
{% load html_tags %}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}COPO - Collaborative Open Plant Omics{% endblock %}</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap-dialog.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/dropdowns-enhancement.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/bootstrap/bootstrap-theme.css' %}">
    <link rel="stylesheet" href="{% static 'copo/bootstrap_switch/css/bootstrap-switch.css' %}">
    <link rel="stylesheet" href="{% static 'copo/fuelux/css/fuelux.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/copo/style.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/copo/menu.css' %}">
    <link rel="stylesheet" href="{% static 'copo/autocomplete_js/autocomplete.css' %}">


    <link rel="shortcut icon" href="{% static 'copo/img/COPO_icon.png' %}"/>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'copo/css/awesome/css/font-awesome.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/awesome/css/awesome-bootstrap-checkbox.css' %}">

    <!-- Selectize Components -->
    <link rel="stylesheet" href="{% static 'copo/css/selectize/selectize.css' %}">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Quattrocento+Sans' rel='stylesheet' type='text/css'>
    <!-- Additional stylesheets -->
    {#    <link rel="stylesheet" href="{% static 'copo/css/copo/smart_table.css' %}">#}
    {% block stylesheet_block %}{% endblock %}


    <!--[if lt IE 9]>
    <script src="{% static 'copo/js/jquery-1.11.1.min.js' %}"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="{% static 'copo/js/jquery-2.1.4.min.js' %}"></script>
    <script src="{% static 'copo/js/jquery-ui.min.js' %}"></script>
    <!--<![endif]-->

    <script src="{% static 'copo/js/jquery.cookie.js' %}"></script>
    <script src="{% static 'copo/js/serialize_form_json.js' %}"></script>
    <script src="{% static 'copo/js/bootstrap.js' %}"></script>
    <script src="{% static 'copo/js/bootstrap-dialog.js' %}"></script>
    <script src="{% static 'copo/js/dropdowns-enhancement.js' %}"></script>
    <script src="{% static 'copo/js/selectize.js' %}"></script>
    <script src="{% static 'copo/bootstrap_switch/js/bootstrap-switch.js' %}"></script>
    <script src="{% static 'copo/fuelux/js/fuelux.js' %}"></script>
    <script src="{% static 'copo/validator1000hz/validator.min.js' %}"></script>

    <script src="{% static 'copo/js/base.js' %}"></script>

    <!-- Additional javascripts -->
    {% block js_block %}{% endblock %}

    <link rel="stylesheet" href="{% static 'copo/css/jquery/jquery-ui.min.css' %}">
    <!-- Date picker components -->
    <link rel="stylesheet" href="{% static 'copo/css/datepicker/jquery.datepick.css' %}">
    <script src="{% static 'copo/js/datepicker/jquery.plugin.js' %}"></script>
    <script src="{% static 'copo/js/datepicker/jquery.datepick.js' %}"></script>

    <!-- EasyUI components -->
    <link rel="stylesheet" href="{% static 'copo/css/easyui/themes/default/easyui.css' %}">
    <link rel="stylesheet" href="{% static 'copo/css/easyui/themes/icon.css' %}">
    <script src="{% static 'copo/js/easyui/jquery.easyui.min.js' %}"></script>

    <!-- DataTables components -->
    <link rel="stylesheet" href="{% static 'copo/datatables/css/jquery.dataTables.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/dataTables.bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/select.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/buttons.dataTables.min.css' %}">
    <link rel="stylesheet" href="{% static 'copo/datatables/css/buttons.bootstrap.min.css' %}">

    <script src="{% static 'copo/datatables/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.select.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'copo/datatables/js/buttons.bootstrap.min.js' %}"></script>
    <script src="{% static 'copo/autocomplete_js/autocomplete.js' %}"></script>

    <script src="{% static 'copo/autocomplete_js/autocomplete.js' %}"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% compress css %}
        <link rel="stylesheet" type="text/scss" href="{% static 'copo/css/copo/colors/sass.scss' %}"/>
    {% endcompress %}

    <script>

        $(document).ready(function () {
            //global search box
            $("#global_search_form").submit(function (event) {
                event.preventDefault();

                $(this).find("input:text").each(function () {
                    console.log($(this).val()); //search term
                    $(this).val('');
                });
            });//end global search

            //suspended toggle
            $(document).on('click', '.dropdown-menu', function (e) {
                if ($(this).hasClass('keep-open-on-click')) {
                    e.stopPropagation();
                }
            });
            //end suspended toggle


        });


        AutoComplete({
            post: do_post
        });


        function do_post(result, response, custParams) {
            response = JSON.parse(response);
            var properties = Object.getOwnPropertyNames(response);
            //Try parse like JSON data

            var empty,
                    length = response.length,
                    li = domCreate("li"),
                    ul = domCreate("ul");
            //Reverse result if limit parameter is custom
            if (custParams.limit < 0) {
                properties.reverse();
            }


            for (var item in response.highlighting) {
                try {
                    li.innerHTML = response.highlighting[item].label_autosuggest[0];

                    $(li).attr("data-autocomplete-value", response.highlighting[item].label_autosuggest[0].replace('<b>', '').replace('</b>', '') + ' - ' + item);

                    ul.appendChild(li);
                    li = domCreate("li");
                }
                catch (err) {
                    console.log(err)
                }
            }
            if (result.hasChildNodes()) {
                result.childNodes[0].remove();
            }

            result.appendChild(ul);
        }


    </script>

</head>

<body>

<!-- hidden fields -->
<input type="hidden" id="elastic_search_ajax" value="{% url 'copo:ajax_search_ontology' ontology_names='999' %}"/>


<div class="container header-level-1">
    <div id="copo-global-nav" class="navbar navbar-default " role="navigation">
        <div class="container-fluid">
            <div class="navbar-header"><a class="navbar-brand" href="#"></a>
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-menubuilder">
                    <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                        class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{% url 'copo:index' %}">
                    <img class="copo-home-img" src="{% static "copo/img/copo_white_800.png" %}"/>
                </a>
            </div>
            <div class="collapse navbar-collapse navbar-menubuilder">
                <div class="col-sm-3 col-md-3">
                    <form id="global_search_form" class="navbar-form" role="search">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search COPO">
                            <div class="input-group-btn">
                                <button class="btn btn-custom" type="submit"><i class="fa fa-search fa-fw"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">

                            <i style="padding-right: 5px;" class="fa fa-cloud-upload" aria-hidden="true"></i>
                            Status

                            <span class="caret"></span>
                        </a>

                        <ul class="dropdown-menu keep-open-on-click"
                            style="width:320px !important; overflow: auto;">
                            <li>
                                <div id="global-status-message">
                                    <div style="padding:10px; color: rgba(85, 85, 85, 1);">
                                        No status message.
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">
                            {% if user.is_authenticated %}
                                <i style="padding-right: 5px;" class="fa fa-user" aria-hidden="true"></i>
                                {{ user }}
                            {% else %}
                                <i style="padding-right: 5px;" class="fa fa-sign-in" aria-hidden="true"></i>
                                Login
                            {% endif %}
                            <span class="caret"></span>
                        </a>

                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                            {% if user.is_authenticated %}

                                <li>
                                    <a href="{% url 'copo:view_orcid_profile' %}" role="menuitem" tabindex="-1">
                                        <div class="custom-nav-items">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                            <span class="icon_text">Orcid Profile</span>
                                        </div>
                                    </a>
                                </li>

                                <li role="presentation"><a role="menuitem" tabindex="-1"
                                                           href="/copo/logout/"><div class="custom-nav-items">
                                            <i class="fa fa-sign-out" aria-hidden="true"></i>
                                            <span class="icon_text">Logout</span>
                                        </div></a>
                                </li>
                            {% else %}
                                <li>
                                    <a href="/copo/login/" role="menuitem" tabindex="-1">
                                        <div class="custom-nav-items">
                                            <i class="fa fa-sign-in" aria-hidden="true"></i>
                                            <span class="icon_text">Login</span>
                                        </div>
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

</div>

{% block page_banner %}
    <!-- fiter tag to check if there are partial submissions -->
    {% comment %}
        {{ partial_submissions|partial_submission_banner }}
    {% endcomment %}
{% endblock %}

<div class="container header-level-2">
    <div style="position: relative; height: 100%;">
        <div class="row">
            <div id="global_work_area" class="col-sm-12 col-md-12 col-lg-12 pull-right"
                 style="transition: all 0.4s ease 0s; margin-top: 70px;">
                {% block browse_header_block %}
                {% endblock %}

                <div class="global-page-title">
                    {% block page_tile %}

                    {% endblock page_tile %}

                </div>

                {% block content %}
                {% endblock content %}
            </div>
        </div>
    </div>
</div>

</body>
</html>
